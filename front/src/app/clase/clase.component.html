<div class="card">
  <h1 id="title" class="m-0">Gesti√≥n de clases</h1>
</div>
<section>
  <div>
    <p-table
      id="clasesTable"
      #dt
      [value]="arrClases"
      [rows]="10"
      [paginator]="true"
      [globalFilterFields]="[
        'id_categoria',
        'nombre',
        'hora_inicio',
        'hora_fin',
        'descripcion'
      ]"
      [tableStyle]="{ 'min-width': '75rem' }"
      [rowHover]="true"
      dataKey="id"
      currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
      [showCurrentPageReport]="true"
    >
      <ng-template pTemplate="caption">
        <div class="flex align-items-center justify-content-between">
          <span class="p-input-icon-left">
            <i class="pi pi-search"></i>
            <input
              [(ngModel)]="searchValue"
              pInputText
              type="text"
              (input)="dt.filterGlobal(searchValue, 'contains')"
              placeholder="Buscar..."
            />
          </span>
          <button
              pButton
              pRipple
              icon="pi pi-user"
              class="p-button-rounded"
              routerLink="/clases/crear/"
            ></button>
        </div>

      </ng-template>

      <ng-template pTemplate="header">
        <tr>
          <th>Categoria</th>
          <th>Dia</th>
          <th>Horario</th>
          <th>Descripcion</th>
          <th>Acciones</th>
        </tr>
      </ng-template>

      <ng-template pTemplate="body" let-clase>
        <tr>
          <td>{{ clase.id_categoria }}</td>
          <td>{{ clase.nombre }}</td>
          <td>{{ clase.hora_inicio }} - {{ clase.hora_fin }}</td>
          <td>{{ clase.descripcion }}</td>
          <td>
            <button
              pButton
              pRipple
              icon="pi pi-pencil"
              class="p-button-rounded p-button-success m-2"
              (click)="edit(clase)"
            ></button>
            <button
              pButton
              pRipple
              icon="pi pi-trash"
              class="p-button-rounded p-button-danger m-2"
              (click)="deleteClase(clase.id)"
            ></button>
          </td>
        </tr>
      </ng-template>

      <ng-template pTemplate="summary">
        <div class="flex align-items-center justify-content-between">
          En total hay {{ arrClases ? arrClases.length : 0 }} Clases.
        </div>
      </ng-template>
    </p-table>

    <p-dialog header="Actualizar Clase" [(visible)]="displayDialog" [style]="{width: '50vw'}" [modal]="true" [closable]="false">
      <div class="p-field">
           <label for="txtid">ID</label>
           <input type="hidden" pInputText [(ngModel)]="clase.id" name="txtid" id="txtid" disabled />
      </div>
      <div class="p-field">
           <label for="txtCategoria">Categoria</label>
           <input type="number" pInputText [(ngModel)]="clase.id_categoria" name="txtCategoria" id="txtCategoria" />
      </div>
      <div class="p-field">
           <label for="txtNombre">Nombre</label>
           <input type="text" pInputText [(ngModel)]="clase.nombre" name="txtNombre" id="txtNombre" />
      </div>
      <div class="p-field">
           <label for="txtHoraInicio">Hora de inicio</label>
           <input type="time" pInputText [(ngModel)]="clase.hora_inicio" name="txtHoraInicio" id="txtHoraInicio" />
      </div>
      <div class="p-field">
           <label for="txtHoraFin">Hora de fin</label>
           <input type="time" pInputText [(ngModel)]="clase.hora_fin" name="txtHoraFin" id="txtHoraFin" />
      </div>
      <div class="p-field">
           <label for="txtDescripcion">Descripcion</label>
           <textarea rows="4" cols="35" pInputTextarea [(ngModel)]="clase.descripcion" name="txtDescripcion" id="txtDescripcion"></textarea>
      </div>
      <div>
           <p-button (click)="actualizar()" label="Actualizar Datos"></p-button>
           <p-button (click)="displayDialog = false" label="Cancelar"></p-button>
      </div>
     </p-dialog>
     
  
  </div>
</section>
